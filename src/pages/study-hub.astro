---
import BaseLayout from "../layouts/BaseLayout.astro";
import Card from "../components/ui/Card.astro";
import Alert from "../components/ui/Alert.astro";
import Footnote from "../components/ui/Footnote.astro";
import { study } from "../content/study";
import { studyRefs, toList } from "../content/references";
---

<BaseLayout title="Study Hub — Project Phoenix" description="A social-learner playbook: group strategies, accountability, timed past papers, and curated SA resources.">
  <section class="mb-8 text-center space-y-3">
    <h1 class="font-display text-3xl sm:text-4xl md:text-5xl font-bold text-gradient italic">Your Study Hub</h1>
    <p class="text-neutral/80 max-w-2xl mx-auto">
      You learn best with people. Use that advantage: study groups, accountability, and consistent practice with past papers.
    </p>
  </section>

  <section class="mb-10">
    <Alert variant="info" title="The Social-Learner Advantage">
      <ul class="list-disc ml-5 space-y-1 text-sm text-neutral/80">
        <li>Form a focused group of 2–4 peers and meet 3–4 times per week.</li>
        <li>Use teach-back: after a topic, one member explains the concept to the group.</li>
        <li>Rotate past-paper marking together to spot patterns and examiner language.</li>
        <li>Pair with an accountability partner for weekly check-ins and goal reviews.</li>
      </ul>
    </Alert>
  </section>

  <section class="mb-12 grid gap-6 md:grid-cols-2">
    {study.strategies.map((s) => (
      <Card title={s.title} accent={s.accent ?? "neutral"}>
        <ul class="list-disc ml-5 space-y-1 text-sm text-neutral/80">
          {s.bullets.map((b) => (
            <li>{b}</li>
          ))}
        </ul>
      </Card>
    ))}
  </section>

  <section class="mb-10">
    <h2 class="font-display text-2xl font-semibold mb-4">Free Resources (South Africa First)</h2>
    <div class="grid gap-6 md:grid-cols-2">
      {study.officialResources.map((r) => (
        <Card title={r.title} href={r.href} accent="blue">
          <p class="text-sm text-neutral/80">
            {r.description}
            {r.refId && <Footnote id={r.refId} tooltip={studyRefs[r.refId]?.title} />}
          </p>
        </Card>
      ))}
      {study.supplementaryResources.map((r) => (
        <Card title={r.title} href={r.href} accent="amber">
          <p class="text-sm text-neutral/80">
            {r.description}
            {r.refId && <Footnote id={r.refId} tooltip={studyRefs[r.refId]?.title} />}
          </p>
        </Card>
      ))}
    </div>

    <div class="mt-8">
      <h3 class="font-display text-xl font-semibold mb-3">How to Use These Efficiently</h3>
      <ul class="list-disc ml-5 space-y-1 text-sm text-neutral/80">
        {study.efficiencyTips.map((t) => (
          <li>{t}</li>
        ))}
      </ul>
    </div>
  </section>

  <section id="references" class="mt-8">
    <h3 class="font-display text-xl font-semibold mb-3">References</h3>
    <ol class="list-decimal ml-5 space-y-1 text-sm text-neutral/80">
      {toList(studyRefs).map((r) => (
        <li id={`ref-${r.id}`}>
          <a class="text-primary" href={r.url}>{r.title}</a>
        </li>
      ))}
    </ol>
  </section>
</BaseLayout>