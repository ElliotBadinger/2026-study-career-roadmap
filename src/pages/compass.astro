---
import BaseLayout from "../layouts/BaseLayout.astro";
import Stepper from "../components/Stepper.astro";
import Section from "../components/Section.astro";
import Surface from "../components/Surface.astro";
import FeatureCard from "../components/FeatureCard.astro";
import Button from "../components/ui/Button.astro";
import Alert from "../components/ui/Alert.astro";
import DecisionMatrixTool from "../components/islands/DecisionMatrixTool.jsx";
import FilterableCareerCards from "../components/islands/FilterableCareerCards.jsx";
import { compass } from "../content/compass";
---

<BaseLayout title="Career Compass â€” Project Phoenix" description="From tests to decisions: tools, synthesis method, and an interactive matrix to compare careers.">
  <Section>
    <Stepper currentPage="Compass" />
    <div class="text-center max-w-3xl mx-auto mt-8">
      <h1 class="text-4xl sm:text-5xl font-display font-bold mb-4 text-balance text-text-light-primary dark:text-text-dark-primary">
        Your Career Compass
      </h1>
      <p class="text-lg text-text-light-secondary dark:text-text-dark-secondary text-balance">
        Reduce uncertainty with a simple, data-driven process. Use these tools to find themes, then use the Decision Matrix to choose your best-fit options.
      </p>
    </div>
  </Section>

  <Section title="Step 1: The Tools">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {compass.toolsPrimary.map((tool) => (
        <FeatureCard title={tool.title} href={tool.href} cta="Open Tool">
          {tool.description}
        </FeatureCard>
      ))}
    </div>
  </Section>

  <Section title="Step 2: The Method">
    <Surface variant="s1" class="p-6">
      <Alert variant="info" title="Cross-reference for recurring themes">
        <ol class="list-decimal ml-5 space-y-1 text-sm">
          {compass.method.map((step) => (
            <li>{step.text}</li>
          ))}
        </ol>
      </Alert>
      <div class="text-center mt-6">
        <Button href="#matrix" variant="secondary">
          Move your best 3-5 options into the matrix now
        </Button>
      </div>
    </Surface>
  </Section>

  <Section title="Step 3: Build Your Decision Matrix" id="matrix">
    <Surface variant="s1" class="p-6">
      <p class="text-text-light-secondary dark:text-text-dark-secondary mb-4 text-sm max-w-prose">
        Add careers, rate Interest, Skills Match, and Job Demand (1-5). The total updates automatically. Sort, export, or import your data anytime.
      </p>
      <DecisionMatrixTool client:load defaultRows={compass.matrixSeed} />
    </Surface>
  </Section>

  <Section title="Explore Career Cards">
    <Surface variant="s1" class="p-6">
      <p class="text-text-light-secondary dark:text-text-dark-secondary mb-4 text-sm max-w-prose">
        Browse example options. Filter by tags or search, then move your top matches into the matrix above.
      </p>
      <FilterableCareerCards client:load />
    </Surface>
  </Section>

  <Section>
    <div class="text-center">
      <Button href="/study-hub" size="lg">Next Step: Prepare to Study</Button>
    </div>
  </Section>
</BaseLayout>
