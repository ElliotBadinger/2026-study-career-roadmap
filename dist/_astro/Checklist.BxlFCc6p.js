import{j as t}from"./jsx-runtime.TBa3i5EZ.js";import{r as a}from"./index.CVf8TyFT.js";function S({storageKey:n="phoenix-checklist",title:h="Checklist",defaultItems:d=[],allowAdd:f=!0}){const g=a.useMemo(()=>{try{const e=localStorage.getItem(n);if(e){const s=JSON.parse(e);if(Array.isArray(s))return s}}catch{}return d.map(e=>({...e,checked:!!e.checked}))},[n,d]),[o,l]=a.useState(g),[c,i]=a.useState("all"),[u,p]=a.useState(""),m=a.useRef(null);a.useEffect(()=>{try{localStorage.setItem(n,JSON.stringify(o))}catch{}},[o,n]);const b=a.useMemo(()=>{const e=o.length,s=o.filter(r=>r.checked).length;return{total:e,done:s,open:e-s}},[o]),x=a.useMemo(()=>{switch(c){case"open":return o.filter(e=>!e.checked);case"done":return o.filter(e=>e.checked);default:return o}},[o,c]);function y(e){l(s=>s.map(r=>r.id===e?{...r,checked:!r.checked}:r))}function k(e){l(s=>s.filter(r=>r.id!==e))}function j(e){e?.preventDefault?.();const s=u.trim();if(!s)return;const r=crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random()}`;l(C=>[...C,{id:r,label:s,checked:!1}]),p(""),m.current?.focus()}function v(){l(e=>e.filter(s=>!s.checked))}function N(){l(d.map(e=>({...e,checked:!!e.checked})))}return t.jsxs("section",{className:"rounded-xl border border-base-300 bg-white p-5 sm:p-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[t.jsx("h3",{className:"font-display text-lg sm:text-xl font-semibold text-neutral",children:h}),t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsxs("span",{className:"px-2 py-1 rounded bg-base-200 border border-base-300",children:[b.done,"/",b.total," done"]}),t.jsxs("div",{role:"group","aria-label":"Filter",children:[t.jsx("button",{type:"button",onClick:()=>i("all"),className:`px-2 py-1 rounded-l border border-base-300 ${c==="all"?"bg-base-200":"hover:bg-base-100"}`,children:"All"}),t.jsx("button",{type:"button",onClick:()=>i("open"),className:`px-2 py-1 border-t border-b border-base-300 ${c==="open"?"bg-base-200":"hover:bg-base-100"}`,children:"Open"}),t.jsx("button",{type:"button",onClick:()=>i("done"),className:`px-2 py-1 rounded-r border border-base-300 ${c==="done"?"bg-base-200":"hover:bg-base-100"}`,children:"Done"})]})]})]}),f&&t.jsxs("form",{onSubmit:j,className:"mb-4 flex gap-2",children:[t.jsx("input",{ref:m,type:"text",value:u,onChange:e=>p(e.target.value),placeholder:"Add a taskâ€¦",className:"flex-1 text-sm px-3 py-2 rounded border border-base-300 bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40","aria-label":"Add a task"}),t.jsx("button",{type:"submit",className:"text-sm px-3 py-2 rounded bg-primary text-white hover:bg-blue-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40",children:"Add"})]}),t.jsx("ul",{className:"space-y-2",children:x.length===0?t.jsx("li",{className:"text-sm text-neutral/60",children:"Nothing here yet."}):x.map(e=>t.jsxs("li",{className:"flex items-start gap-3 rounded border border-base-300 bg-base-100 p-3",children:[t.jsx("input",{id:`${n}-${e.id}`,type:"checkbox",checked:!!e.checked,onChange:()=>y(e.id),className:"mt-0.5 h-4 w-4 rounded border-base-300 text-primary focus:ring-primary/40"}),t.jsx("label",{htmlFor:`${n}-${e.id}`,className:`flex-1 text-sm ${e.checked?"line-through text-neutral/50":"text-neutral/90"}`,children:e.label}),t.jsx("button",{type:"button",onClick:()=>k(e.id),"aria-label":"Remove item",className:"text-xs px-2 py-1 rounded border border-base-300 hover:bg-base-200",children:"Remove"})]},e.id))}),t.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 text-xs",children:[t.jsx("button",{type:"button",onClick:v,disabled:b.done===0,className:"px-3 py-1.5 rounded border border-base-300 hover:bg-base-200 disabled:opacity-50",children:"Clear completed"}),t.jsx("button",{type:"button",onClick:N,className:"px-3 py-1.5 rounded border border-base-300 hover:bg-base-200",children:"Reset to defaults"})]})]})}export{S as default};
