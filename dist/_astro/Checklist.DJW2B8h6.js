import{j as r}from"./jsx-runtime.TBa3i5EZ.js";import{r as o}from"./index.CVf8TyFT.js";function S({storageKey:s="phoenix-checklist",title:k="Checklist",defaultItems:n=[],allowAdd:u=!0}){const x=o.useMemo(()=>{try{const e=localStorage.getItem(s);if(e){const t=JSON.parse(e);if(Array.isArray(t))return t}}catch{}return n.map(e=>({...e,checked:!!e.checked}))},[s,n]),[a,l]=o.useState(x),[i,c]=o.useState("all"),[g,h]=o.useState(""),p=o.useRef(null);o.useEffect(()=>{try{localStorage.setItem(s,JSON.stringify(a))}catch{}},[a,s]);const b=o.useMemo(()=>{const e=a.length,t=a.filter(d=>d.checked).length;return{total:e,done:t,open:e-t}},[a]),m=o.useMemo(()=>{switch(i){case"open":return a.filter(e=>!e.checked);case"done":return a.filter(e=>e.checked);default:return a}},[a,i]);function y(e){l(t=>t.map(d=>d.id===e?{...d,checked:!d.checked}:d))}function f(e){l(t=>t.filter(d=>d.id!==e))}function v(e){e?.preventDefault?.();const t=g.trim();if(!t)return;const d=crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random()}`;l(C=>[...C,{id:d,label:t,checked:!1}]),h(""),p.current?.focus()}function j(){l(e=>e.filter(t=>!t.checked))}function N(){l(n.map(e=>({...e,checked:!!e.checked})))}return r.jsxs("section",{className:"rounded-xl border border-border-light bg-bg-light-primary dark:border-border-dark dark:bg-bg-dark-surface p-5 sm:p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[r.jsx("h3",{className:"font-display text-lg sm:text-xl font-semibold text-text-light-primary dark:text-text-dark-primary",children:k}),r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsxs("span",{className:"px-2 py-1 rounded bg-bg-light-secondary border border-border-light dark:bg-bg-dark-primary dark:border-border-dark",children:[b.done,"/",b.total," done"]}),r.jsxs("div",{role:"group","aria-label":"Filter",children:[r.jsx("button",{type:"button",onClick:()=>c("all"),className:`px-2 py-1 rounded-l border border-border-light dark:border-border-dark ${i==="all"?"bg-bg-light-secondary dark:bg-bg-dark-primary":"hover:bg-bg-light-secondary/50 dark:hover:bg-bg-dark-primary/50"}`,children:"All"}),r.jsx("button",{type:"button",onClick:()=>c("open"),className:`px-2 py-1 border-t border-b border-border-light dark:border-border-dark ${i==="open"?"bg-bg-light-secondary dark:bg-bg-dark-primary":"hover:bg-bg-light-secondary/50 dark:hover:bg-bg-dark-primary/50"}`,children:"Open"}),r.jsx("button",{type:"button",onClick:()=>c("done"),className:`px-2 py-1 rounded-r border border-border-light dark:border-border-dark ${i==="done"?"bg-bg-light-secondary dark:bg-bg-dark-primary":"hover:bg-bg-light-secondary/50 dark:hover:bg-bg-dark-primary/50"}`,children:"Done"})]})]})]}),u&&r.jsxs("form",{onSubmit:v,className:"mb-4 flex gap-2",children:[r.jsx("input",{ref:p,type:"text",value:g,onChange:e=>h(e.target.value),placeholder:"Add a taskâ€¦",className:"flex-1 text-sm px-3 py-2 rounded border border-border-light bg-bg-light-primary dark:border-border-dark dark:bg-bg-dark-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40","aria-label":"Add a task"}),r.jsx("button",{type:"submit",className:"text-sm px-3 py-2 rounded bg-primary text-white hover:bg-blue-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40",children:"Add"})]}),r.jsx("ul",{className:"space-y-2",children:m.length===0?r.jsx("li",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary",children:"Nothing here yet."}):m.map(e=>r.jsxs("li",{className:"flex items-start gap-3 rounded border border-border-light bg-bg-light-secondary dark:border-border-dark dark:bg-bg-dark-primary p-3",children:[r.jsx("input",{id:`${s}-${e.id}`,type:"checkbox",checked:!!e.checked,onChange:()=>y(e.id),className:"mt-0.5 h-4 w-4 rounded border-border-light dark:border-border-dark text-primary focus:ring-primary/40"}),r.jsx("label",{htmlFor:`${s}-${e.id}`,className:`flex-1 text-sm ${e.checked?"line-through text-text-light-secondary/80 dark:text-text-dark-secondary/80":"text-text-light-primary dark:text-text-dark-primary"}`,children:e.label}),r.jsx("button",{type:"button",onClick:()=>f(e.id),"aria-label":"Remove item",className:"text-xs px-2 py-1 rounded border border-border-light hover:bg-bg-light-primary dark:border-border-dark dark:hover:bg-bg-dark-surface",children:"Remove"})]},e.id))}),r.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 text-xs",children:[r.jsx("button",{type:"button",onClick:j,disabled:b.done===0,className:"px-3 py-1.5 rounded border border-border-light hover:bg-bg-light-secondary dark:border-border-dark dark:hover:bg-bg-dark-surface disabled:opacity-50",children:"Clear completed"}),r.jsx("button",{type:"button",onClick:N,className:"px-3 py-1.5 rounded border border-border-light hover:bg-bg-light-secondary dark:border-border-dark dark:hover:bg-bg-dark-surface",children:"Reset to defaults"})]})]})}export{S as default};
