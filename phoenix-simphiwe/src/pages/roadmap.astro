---
import BaseLayout from "../layouts/BaseLayout.astro";
import Alert from "../components/ui/Alert.astro";
import InteractiveTimeline from "../components/islands/InteractiveTimeline.jsx";
import Checklist from "../components/islands/Checklist.jsx";
import { phases, defaults } from "../content/roadmap";
import { roadmapRefs, toList } from "../content/references";
---

<BaseLayout title="Your Roadmap — Project Phoenix" description="A 5‑phase plan with interactive checklists that save on your device.">
  <section class="mb-8">
    <div class="text-center space-y-3">
      <h1 class="font-display text-3xl sm:text-4xl md:text-5xl font-bold text-gradient italic">Your Action Plan</h1>
      <p class="text-neutral/80 max-w-2xl mx-auto">
        Expand a phase to understand the goal, then tick off items as you progress. Your progress is saved locally on
        this device.
      </p>
    </div>
  </section>

  <section class="mb-10">
    <Alert variant="info" title="How this works">
      <ul class="list-disc ml-5 space-y-1 text-sm">
        <li>Use the timeline to understand the phases and what “good” looks like.</li>
        <li>Each phase has its own checklist that saves to your device automatically.</li>
        <li>Keep it simple: a few consistent actions every week beat last‑minute cramming.</li>
      </ul>
    </Alert>
  </section>

  <section class="mb-10">
    <InteractiveTimeline client:load phases={phases} title="Your 5‑Phase Plan" />
  </section>

  <section class="space-y-8">
    <div>
      <h2 class="font-display text-xl font-semibold mb-3">Phase 1 Checklist</h2>
      <Checklist
        client:load
        storageKey="phoenix-checklist-phase-1"
        title="Focus & Self‑Discovery (Now → late September)"
        defaultItems={defaults["phase-1"]}
      />
    </div>

    <div>
      <h2 class="font-display text-xl font-semibold mb-3">Phase 2 Checklist</h2>
      <Checklist
        client:load
        storageKey="phoenix-checklist-phase-2"
        title="Applications & Funding (September → October)"
        defaultItems={defaults["phase-2"]}
      />
    </div>

    <div>
      <h2 class="font-display text-xl font-semibold mb-3">Phase 3 Checklist</h2>
      <Checklist
        client:load
        storageKey="phoenix-checklist-phase-3"
        title="Final Exam Preparation (October → November)"
        defaultItems={defaults["phase-3"]}
      />
    </div>

    <div>
      <h2 class="font-display text-xl font-semibold mb-3">Phase 4 Checklist</h2>
      <Checklist
        client:load
        storageKey="phoenix-checklist-phase-4"
        title="Results & Offers (January 2026)"
        defaultItems={defaults["phase-4"]}
      />
    </div>

    <div>
      <h2 class="font-display text-xl font-semibold mb-3">Phase 5 Checklist</h2>
      <Checklist
        client:load
        storageKey="phoenix-checklist-phase-5"
        title="Orientation & Pre‑Start (Feb → Mar 2026)"
        defaultItems={defaults["phase-5"]}
      />
    </div>
  </section>

  <section id="references" class="mt-8">
    <h3 class="font-display text-xl font-semibold mb-3">References</h3>
    <ol class="list-decimal ml-5 space-y-1 text-sm text-neutral/80">
      {toList(roadmapRefs).map((r) => (
        <li id={`ref-${r.id}`}>
          <a class="text-primary" href={r.url}>{r.title}</a>
        </li>
      ))}
    </ol>
  </section>
</BaseLayout>